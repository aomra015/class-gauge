<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1" />
<title>untitled</title>
<link rel="stylesheet" href="" />
</head>
<body>
<script>
	var LESSON_ID = '-JX-GSSicqcpOSaO25K9';
	var classGauge = function(){
		var first_time = true;
		var ref = new Firebase("https://class-gauge.firebaseio.com/");
		var surveys = ref.child('lessons/'+ LESSON_ID + '/surveys').limit(1);
		
		surveys.on("child_added", function(snapshot) {
			first_time ? (first_time = false) : initSurvey(snapshot);
		});

		var initSurvey = function(snapshot){
			var survey = ref.child("surveys/"+snapshot.name());
			if (confirm('How are you feeling -- are you fine to move on?')) {
				survey.child('yesVotes').transaction(function(votes){
					return votes+1;
				})
			} else {
			  survey.child('noVotes').transaction(function(votes){
			  	return votes+1;
			  })
			}
		};
	}
	var s=document.createElement('script');
	s.type='text/javascript';
	s.src='https://cdn.firebase.com/js/client/1.0.21/firebase.js';
	s.onload = classGauge;
	document.getElementsByTagName('head')[0].appendChild(s);
</script>
</body>
</html>